<li>
    <h3>Course Checklist</h3>
    <ul class="links" id="checklist">
      <% unless @current_user == nil %>
       <% Course.find_all_by_uid(@current_user.facebook_id).each do |c| %>
      <li id="<%= c.name %>">
<%= check_box_tag(c.name, 1, Course.find_by_name_and_uid(c.name, @current_user.facebook_id).checked,
    :onclick => remote_function(
    :update => c.name,
    :url => { :controller => 'course', :action => 'check' },
    :update => visual_effect(:highlight, c.name, :duration => 1.0))) %>
    <%= c.name %> </li>
   <% end %>
      

<li>

  <div id="add_link"><%= link_to_function("Add a course",
"Element.remove('add_link'); Element.show('add_course'); Element.remove('empty_list')")%></div>
<div id="add_course" style="display:none;">
<% form_remote_tag(:url => {:controller => 'course', :action => 'create'},
    :update => "checklist", :position => :top,
    :html => {:id => 'cl_form'},
    :complete => visual_effect(:highlight, 'new_course', :duration => 1.2)) do %>
<div style="font-family:'Delicious Bold';">Add a course:</div> <%= text_field 'course', 'name' %>
  <%= hidden_field 'course', 'uid', :value => @current_user.facebook_id  %>
<%= submit_tag 'Add' %>
<% end %>
</div>
</li>
    </ul>

    <% end %>
  </li>